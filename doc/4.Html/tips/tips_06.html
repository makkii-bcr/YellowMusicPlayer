<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">

  <title>YellowMusicPlayer</title>
 </head>
 <body>
  <h1>
   <img src="../res/icon.png" align="top">
   &nbsp;Tips・その他&nbsp;
   <img src="../res/icon.png" align="top">
  </h1>
  <hr>
  <h2>バグ</h2>
  <ul>
   <li>YellowMusicPlayerの起動が遅い。BGMがなるまで時間がかかる。</li>
   <ul>
    <li>Windows Vista, 7 でこの現象が起こるPCがあります。（すぐ起動するwin7のPCもある。XP以前はすぐ起動する）<br>
        <a href="tips_02.html">YellowMusicPlayerの設定</a>でDirectMusicをOFFにすると起動が速くなります。</li>
    <li>ただし、DirectMusicをOFFにすると、Midiの反応が鈍くなる・他のPCで同じ音源でなくなる・Midiの音がきれいではなくなる<br>
        といったことが起こるので、そこも考慮して下さい。</li>
   </ul>
   <br>
   <li>再生の命令を出しても、再生されない場合があります。</li>
   <ul>
    <li>YellowMusicPlayerでは反応速度を優先しているため、デフォルトではファイルの読み込み頻度が1秒間に60回と高いです。<br>
        <a href="tips_02.html">YellowMusicPlayerの設定</a>でファイルの読み込み頻度を少なくすると、バグが少なくなる可能性があります。</li>
    <li>標準の$mplayerのままの場合に発生しやすいです。（バグの原因となるコードがあるため）</li>
    <li>Ymplayer.tonyuを使用することを勧めます。（バグの発生しにくくなる）<br>
        または、修正版MediaPlayer.tonyuを上書きすることを勧めます。<br>
        </li>
    <li>TonyuとMusicPlayerが、１つのファイルを読み書きしてBGMの再生命令を認識するという方法をとっています。<br>
        その仕様上同時アクセスが発生する可能性があるため、このバグを完全に消すことはできません。</li>
   </ul>
   <br>
   <li>マスターピッチ機能を使うと、Midiファイルによっては音が変になる場合があります。</li>
   <ul>
    <li>ピッチベンドが送信されているMidiファイルで、うまく再生されないらしいです。</li>
    <li>バグが起きないMidiファイルで、マスターピッチ機能を使いたい場合のみONにするといいです。</li>
    <li>使用しているライブラリの仕様(Midiの仕様かも)なので悪しからず…</li>
   </ul>
   <br>
   <li>Midiでフェードイン・フェードアウトを行ったり、Midi再生中に音量・ピッチの値が変化する頻度が多かったりすると、<br>
       Midiファイルによっては再生速度が遅くなる場合があります。</li>
   <ul>
    <li>毎秒60回程の頻度で音量・ピッチの値が変化する場合に、再生速度が遅くなるMidiファイルがありました。</li>
    <li>DirectMusicを使用している場合で起きる現象だと思います。</li>
    <li>遅くなる場合は、変化の頻度を少なくしたり、フェードイン・フェードアウトを無効にしたりするほうがいいです。<br>
        または、DirectMusicをOFFにするとこのバグがおきません。</li>
   </ul>
   <br>
   <li>Midi再生開始時に、最初の音だけピアノ音になることがあります。</li>
   <ul>
    <li>「細かい仕様」にもあるようにバグ防止策を講じているので、バグの頻度は少なくなっています。</li>
    <li>しかし、稀にこのバグが発生してしまいます。気になるときは、冒頭の空白スキップをOFFにしてください。</li>
    <li>DirectMusicがOFFで、Midiデバイスに「TiMidity++」を設定している場合、Midiの音色が全てピアノになることがあります。</li>
   </ul>
   <br>
   <li>Midiのキャッシュ機能がONのとき、Midiファイルを途中で上書きしても、YellowMusicPlayerでは反映されません。</li>
   <ul>
    <li>Midiのキャッシュ機能がONのときは、起動時にMidiファイルをメモリに読み込んで、それ以降はディスクから読まないため、<br>
        このような現象が起きます。</li>
    <li>Tonyuの開発環境版でMidiを変更した場合、Tonyuを再起動すると変更後のMidiファイルが適応されます。</li>
   </ul>
  </ul>
   <ul>
   <li>ＰＣの処理がかなり重くなった時に、Oggの曲が８秒ごとに繰り返される場合があります。</li>
   <ul>
    <li>この現象はよほどＰＣが重くならない限り、めったに起きない現象なので、気にする必要はないでしょう。<br>
        この現象が起きても、処理に余裕ができれば、本来の再生位置まで戻るように作っているので…<br>
        ただし、Oggのテンポを速くしている場合は注意が必要です。</li>
    <li>YellowMusicPlayerではOggを再生するために、前もって８秒先の音を作っておきます。<br>
        再生中は、８秒先の音を常に作っています。<br>
        しかし、ＰＣの処理がかなり重くなった時は処理が止まってしまい、音を作るのが間に合わなくなった時にこの現象が発生します。</li>
   </ul>
  </ul>
  <h2>細かい仕様</h2>
  細かい仕様なので、あまりに気にする必要はないです！
  <ul>
   <li>Midi再生中・一時停止中に他のMidiに切り換えて再生する場合、30ミリ秒間停止してから再生開始します。</li>
   <ul>
    <li>即座にMidiを切り換えると、最初の音がピアノになってしまうことがあるため、そのバグ防止策です。</li>
    <li>停止中は30ミリ秒間待たずに、即座に再生開始します。</li>
   </ul>
   <br>
   <li>現在の演奏時間の取得・Midiファイルの情報取得は、setGettingPlayerStatus()メソッドで指定した頻度で更新される以外に、<br>
       再生・停止・一時停止・一時停止からの再開の命令が出された時でも更新されます。</li>
   <ul>
    <li>一時停止・一時停止からの再開では、30ミリ秒遅れて更新されます。</li>
    <li>再生・停止では、即座に更新されます。</li>
   </ul>
   <br>
   <li>開発環境版では、プロジェクトを切り換えると、エフェクト情報・再生オプションの情報がリセットされます。</li>
   <ul>
    <li>MusicPlayerでは、Midiファイルのあるパスを見て、default.tonyuprjのパスが変わったときにリセットという方法をとっています。</li>
   </ul>
   <br>
   <li>Midiファイルがサブフォルダ３つの中までなら、MusicPlayerはエフェクト情報の取得・MusicPlayerの状態の書き込みができます。</li>
   <ul>
    <li>例えば、今開いているプロジェクトのフォルダのパスが「C:\Usr」の場合、<br>
        Midiファイルのパスが「C:\Usr\sub1\sub2\sub3\bgm01.mid」の場合でも、<br>
        エフェクト情報「eff_midi.txt」を取得でき、「YMPStatus.dat」を書き込むことができます。</li>
    <li>「C:\Usr\sub1\sub2\sub3\sub4\bgm01.mid」のようにサブフォルダが４つの場合、<br>
        Midiは再生されますが、エフェクトが適応されずに演奏されます。<br>
        また、MusicPlayerの状態取得もできなくなります。</li>
    <li>演奏されるMidiのパスから、「default.tonyuprj」を探すのでこのような現象が起きます。</li>
    <li>エフェクトを使わない場合・MusicPlayerの状態取得機能を使わない場合は、この話は無関係です。</li>
   </ul>
  </ul>
  <a href="../tips.html">戻る</a>
  <hr>
 </body>
</html>